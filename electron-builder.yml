# electron-builder configuration
# This file configures how electron-builder creates installers

appId: com.talktoyouraccounts.app
productName: Talk to Your Accounts

# Directory structure for the build output
directories:
  output: dist
  buildResources: build

# Files to include in the final package
files:
  - from: .
    filter:
      # Exclude development-only files and large dependencies
      - "!node_modules/*"
      - "!dist/*"
      - "!.git/**"
      - "!*.md"
      - "!package-lock.json"
      - "!yarn.lock"
      - "!*.log"
      - "!npm-debug.log*"
      - "!yarn-error.log*"
      - "!vercel.json"
      - "!VERCEL_DEPLOYMENT.md"
      - "!landing/**"
      - "!scripts/**"
      - "!build/**"
      - "!.github/**"
      # Include necessary source files (removed exclusions for electron, src, public)
      - "electron/**"
      - "public/**"
      - "src/**"
      - "*.json"
      - "*.js"
      - "*.jsx"
      - "*.ts"
      - "*.tsx"
      - "*.css"

# Additional files to include - copy React build to app root
extraFiles:
  - from: dist
    to: .
    filter:
      - "**/*"

# Define win, mac, and linux targets
win:
  target: nsis
  artifactName: Talk-to-Your-Accounts-Setup-${version}.exe

mac:
  target: dmg
  artifactName: Talk-to-Your-Accounts-${version}.dmg

linux:
  target:
    - AppImage
    - deb
  artifactName: Talk-to-Your-Accounts-${version}

# NSIS installer configuration for Windows
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: Talk to Your Accounts

# Debian package configuration for Linux
deb:
  depends:
    - libnss3
    - libnspr4
    - libatk1.0-0
    - libatk-bridge2.0-0
    - libcups2
    - libdrm2
    - libxkbcommon0
    - libxcomposite1
    - libxdamage1
    - libxfixes3
    - libxrandr2
    - libgbm1
    - libasound2

# Release configuration
# NOTE: Auto-publishing is disabled to prevent conflicts with the GitHub Actions workflow
# The create-release job handles publishing using softprops/action-gh-release
publish: never
